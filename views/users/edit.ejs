<header>
    <link rel="stylesheet" href="/css/userEdit.css">
    <script src="/js/userEdit.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="//code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
</header>

<body style="background-image:url(/images/chirpyBackground.jpg);" onload="test()">
    <div id="header"></div>
    <div class="mainform">
        <div class="container">
            <div class="row">
                <div class="col-md-4 col-sm-6" id="test">
                    <form action="<%=`/users/${user._id}/update?_method=PUT`%>" method="POST" class="form_horizontal">
                        <!-- onsubmit="return ValidateForm(this)" -->
                        <div class="icon">
                            <center><i class="fa fa-twitter" onclick="alert('Chirp!')"></i></center>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <div class="form-group">

                                </div>
                                <label for="txtFirstName">First Name: </label>

                                <input type="text" name="FirstName" id="txtFirstName" autofocus
                                    value="<%= user.FirstName %>" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="txtLastName">Last Name:</label>

                                <input class="form-control" type="text" name="LastName" id="txtLastName"
                                    value="<%= user.LastName %>">
                            </div>
                            <div class="form-group">
                                <label for="txtUsername">Username: </label>
                                <input class="form-control" type="text" name="Username" id="txtUsername"
                                    value="<%= user.Username %>">
                            </div>
                            <!-- <label for="txtGender">Gender: </label>
    <input type="radio" name="Gender" id="txtGender" required value="<%= user.Gender %>"> -->
                            <fieldset class="form-group" >
                                <div class="row">
                                    <legend class="col-form-label">Gender</legend>

                                    <div value="<%= user.Gender %>">
                                        <div class="form-check">
                                            <input type="radio" id="rbMale" name="Gender" value="male"
                                                class="form-check-input" <%=(user.Gender == 'male')? 'checked':''%>>
                                            <label for="rbMale" class="form-check-label">
                                                Male</label>
                                        </div>

                                        <div class="form-check">
                                            <input type="radio" id="rbFemale" name="Gender" value="female"
                                                class="form-check-input" <%=(user.Gender == 'female')? 'checked':''%>>
                                            <label for="rbFemale" class="form-check-label">Female</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="radio" id="rbOther" name="Gender" value="other"
                                                class="form-check-input" <%=(user.Gender == 'other')? 'checked':''%>>
                                            <label for="rbOther" class="form-check-label">Other</label>
                                        </div>

                                    </div>
                                </div>
                            </fieldset>


                            <div class="form-group">
                                <label for="txtLocation">Location: </label>

                                <input class="form-control" type="text" name="Location" id="txtLocation"
                                    value="<%= user.Location %>">
                            </div>
                            <div class="form-group">
                                <label for="txtEmail">Email: </label>

                                <input class="form-control" type="email" name="Email" id="txtEmail"
                                    value="<%= user.Email %>">
                            </div>
                            <div class="form-group">
                                <label for="txtPassword">Current Password: </label>

                                <input class="form-control"
                                    pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$"
                                    type="password" name="Password" id="txtPassword">
                                <!-- <div class="minimessage">
                                    <h5>*Password must contain: 8 minimum chars, 1 uppercase letter, 1 lowercase letter,
                                        1 number, and 1 special character</h5>
                                </div> -->

                            </div>
                            <div class="form-group">
                                <label for="txtNewPassword">New Password: </label>

                                <input class="form-control"
                                    pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$"
                                    type="password" name="NewPassword" id="txtNewPassword">
                                <!-- <div class="minimessage">
                                    <h5>*Password must contain: 8 minimum chars, 1 uppercase letter, 1 lowercase letter,
                                        1 number, and 1 special character</h5>
                                </div> -->

                            </div>
                            <div class="form-group">
                                <label for="txtConfirmNewPassword">Confirm New Password: </label>

                                <input class="form-control"
                                    pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$"
                                    type="password" name="confirmNewPassword" id="txtConfirmNewPassword">
                                <!-- <div class="minimessage">
                                    <h5>*Password must contain: 8 minimum chars, 1 uppercase letter, 1 lowercase letter,
                                        1 number, and 1 special character</h5>
                                </div> -->

                            </div>


                            <div class="form-group">

                                <label for="txtDoB">Date of Birth: </label>

                                <input required class="form-control" type="date" name="DoB" id="txtDoB"
                                    value="<%=user.DoB.getFullYear() + '-' + ('0'+(user.DoB.getMonth()+1)).slice(-2) + '-' + ('0' + user.DoB.getDate()).slice(-2)%>">


                            </div>
                            <!-- <label for="txtSecurityQuestion">Security Question: </label>
    <input type="text" name="SecurityQuestion" id="txtSecurityQuestion" required value="<%= user.SecurityQuestion %>">

                            <label for="txtAnswer">Answer: </label>
    <input type="text" name="Answer" id="txtAnswer" required value="<%= user.Answer %>">  -->
                            <div class="form-group">
                                <div class="row form-group" onclick="func()">
                                    <label for="ddSecurityQuestion" class="col-form-label">
                                        Security Question
                                    </label>
                                    <div>
                                        <select class="form-control" name="SecurityQuestion" id="ddSecurityQuestion"
                                            required>
                                            <option value="What was your high school mascot?" <%=(user.SecurityQuestion == 'What was your high school mascot?')? 'selected':''%>>What was your high school
                                                mascot?</option>
                                            <option value="Who is your favorite author?" <%=(user.SecurityQuestion == 'Who is your favorite author?')? 'selected':''%>>Who is your favorite author?
                                            </option>
                                            <option value="What is your mother's maiden name?" <%=(user.SecurityQuestion == "What is your mother's maiden name?")? 'selected':''%>>What is your mother's maiden
                                                name?</option>
                                        </select>
                                    </div>
        
                                    <div>
                                        <input class="form-control" name="Answer" id="txtAnswer" type="text"
                                            placeholder="Answer" value="<%= user.Answer %>">
                                        <div id="divtxtAnswerError" class="errormsg invisible"></div>
                                        </input>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="txtBio">Bio: </label>
                                <br>
                                <input name="Bio" id="txtBio" value="<%= user.Bio.trim() %>" class="form-control" maxlength="250">

                                <!-- <textarea><%=user.Bio.trim()%></textarea> -->


                            </div>
                            <button class="btn" id='signup' type="submit">Update Profile</button>
                    </form>


                    <a href="<%=`/users/${user._id}/`%>">
                        <p><button class="btn" id="reset">Back</button></p>
                    </a>
                </div>
            </div>

</body>